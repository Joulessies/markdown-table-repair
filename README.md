# markdown-table-repair

> ğŸ©¹ A zero-dependency utility that fixes broken Markdown tables generated by AI LLMs.

[![npm version](https://img.shields.io/npm/v/markdown-table-repair.svg)](https://www.npmjs.com/package/markdown-table-repair)
[![bundle size](https://img.shields.io/bundlephobia/minzip/markdown-table-repair)](https://bundlephobia.com/package/markdown-table-repair)
[![license](https://img.shields.io/npm/l/markdown-table-repair.svg)](./LICENSE)

---

## The Problem

When AI models stream responses containing Markdown tables, the output often arrives **incomplete or malformed**:

- Missing closing pipes `|`
- Mismatched column counts
- Incomplete separator rows `|---|`
- Truncated rows mid-stream

This causes Markdown parsers to crash, UI components to break, and users to see garbled output.

## The Solution

**One line of code to heal the markdown.**

```js
const fixed = repairTable(brokenMarkdown);
```

`markdown-table-repair` intelligently analyzes and reconstructs broken table structures, making it perfect for:

- **Streaming AI responses** (ChatGPT, Claude, Gemini, etc.)
- **Real-time Markdown renderers**
- **Chat interfaces** displaying LLM output

---

## Installation

```bash
npm install markdown-table-repair
```

---

## Usage

Works **everywhere** â€” Node.js, browsers, and modern bundlers.

### Node.js (CommonJS)

```js
const { repairTable } = require('markdown-table-repair');

const broken = `| Name | Age
| Alice | 25
| Bob`;

const fixed = repairTable(broken);
console.log(fixed);
```

### ES Modules (React, Next.js, Vite)

```js
import { repairTable } from 'markdown-table-repair';

function ChatMessage({ content }) {
  const safeContent = repairTable(content);
  return <MarkdownRenderer>{safeContent}</MarkdownRenderer>;
}
```

### Browser (CDN)

```html
<script src="https://unpkg.com/markdown-table-repair/dist/index.umd.js"></script>
<script>
  const { repairTable } = window.markdownTableRepair;
  
  const fixed = repairTable(brokenTableString);
  document.getElementById('output').innerText = fixed;
</script>
```

---

## Before & After

### âŒ Before (Broken)

```markdown
| Feature | Status
|---|
| Streaming Support | âœ…
| Zero Dependencies
| Universal Module |
```

### âœ… After (Repaired)

```markdown
| Feature | Status |
|---|---|
| Streaming Support | âœ… |
| Zero Dependencies |  |
| Universal Module |  |
```

The table is now valid Markdown with:
- Consistent column counts
- Properly closed pipes
- Complete separator row

---

## Key Features

- **ğŸª¶ Zero Dependencies** â€” Lightweight and fast. No bloat in your `node_modules`.
- **âš¡ Streaming-Ready** â€” Handles partial, incomplete tables mid-stream gracefully.
- **ğŸŒ Universal (UMD)** â€” Works in Node.js, ES Modules, and browsers via CDN.
- **ğŸ”’ Non-Destructive** â€” Only repairs tables; leaves the rest of your Markdown untouched.
- **ğŸ“˜ TypeScript Support** â€” Includes type definitions out of the box.

---

## API Reference

### `repairTable(input)`

Repairs broken Markdown tables in the provided string.

#### Parameters

| Parameter | Type     | Description                                              |
|-----------|----------|----------------------------------------------------------|
| `input`   | `string` | The Markdown string containing potentially broken tables |

#### Returns

| Type     | Description                                  |
|----------|----------------------------------------------|
| `string` | The Markdown string with all tables repaired |

#### Example

```js
import { repairTable } from 'markdown-table-repair';

const input = `
# My Document

| Header 1 | Header 2
|---|
| Cell 1 | Cell 2
| Cell 3

Some other content here.
`;

const output = repairTable(input);
console.log(output);
```

**Output:**

```markdown
# My Document

| Header 1 | Header 2 |
|---|---|
| Cell 1 | Cell 2 |
| Cell 3 |  |

Some other content here.
```

---

## Use Cases

- **AI Chat Interfaces** â€” Safely render streamed Markdown from LLMs
- **Documentation Tools** â€” Clean up auto-generated tables
- **Markdown Editors** â€” Provide real-time table validation
- **Content Pipelines** â€” Sanitize Markdown before publishing

---

## License

MIT

